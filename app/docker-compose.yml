version: "3"

services:
    db:
      container_name: postgres
      image: postgres
      environment:
        POSTGRES_HOST: postgres
        POSTGRES_PASSWORD: 123456
        POSTGRES_USERNAME: postgres
      # we can save the data even we kill the container
      volumes:
        - ./postgres-data:/var/lib/postgresql/data
    product-service:
      #      path to dockerfile to build
      image: ivanspasov/springbootapi:latest
      # - volumes
      #      bind source folder (host system) to container folder, so we can tracking changes and...??
      #      Volumes are the preferred mechanism for persisting data generated by and used by Docker containers??
      #      This allows you to make changes to the project from your computer during the local development process, that will be picked up by project inside Docker.
      #      These changes will be available to the project only as long as the host directory is mounted inside the container.
      #      In order to be made permanent, they need to be committed into the repository so that they will be picked up when the image and container are rebuilt.
      #      Volumes are the preferred mechanism for persisting data generated by and used by Docker containers.
      ports:
        - 9000:9000
      depends_on:
        - db
    fron-end-service:
      image: ivanspasov/vue-js-front-end:latest
      ports:
      - 8080:80
      depends_on:
        - product-service